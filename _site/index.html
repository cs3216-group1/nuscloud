<!DOCTYPE html>
<head>
  <title>NUSCloud API</title>
  <meta charset='utf-8'/>
  <meta name='description' content='Documentation website'/>
  <meta name='viewport' content='width=device-width, initial-scale=1, maximum-scale=1'/>
  <link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'/>
  <link href='assets.css' rel='stylesheet' type='text/css'>
</head>
<body>  
  <nav id='sidebar'>
	<h1>NUSCloud API</h1>
<ul id='links'>
  
    
    <li><a href='#/overview'>Overview</a></li>
    
  
    
    <li><a href='#/javascript'>Getting Started - Javascript</a></li>
    
  
    
    <li><a href='#/authentication'>Authenticate - Javascript</a></li>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
    <li><a href='#/error-codes'>Statuses</a></li>
    
  
  
  <li><h2>user + app</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/get-user-app-data'>Get user data for app</a></li>
              
        <li class='POST'><a href='#/edit-user-app-data'>Edit user data for app</a></li>
              
        <li class='DELETE'><a href='#/delete-user-app-data'>Delete user data for app</a></li>
      
    
    </ul>
  </li>

  <li><h2>user</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/get-user-info'>Get user info</a></li>
              
        <li class='GET'><a href='#/get-friends'>Get user friends</a></li>
      
    
    </ul>
  </li>

  <li><h2>app</h2>
    <ul>
    
              
        <li class=''><a href='#'></a></li>
      
    
              
        <li class='GET'><a href='#/get-app-info'>Get app info</a></li>
      
    
    </ul>
  </li>

</ul>
</nav>

<section id='content'>

  <article class=''>
    <a name='/overview' href='#/overview'><h2>Overview</h2></a>
    <section class='body'>
      <h3 id="about">About</h3>

<p>NUSCloud aims to be a collaborative backend service for applications serving the NUS community, hosted <a href="nuscloud.jishnumohan.com">here</a>. To achieve this, it exposes an API to applications allowing them to authenticate users, to store data, and for users to share data across applications.</p>

<p>Through this, NUSCloud aims to minimize redundancy both in terms of developer code and user data entry - improving experience across the board and hopefully contributing to boost application development and growth targeted to NUS students. </p>

<h3 id="api-details">API Details</h3>

<p>NUSCloud exposes a REST-like API which can be accessed via HTTP requests. To simplify integration for client-side focussed applications, the use of the Javascript SDK is recommended.</p>

<p>With the exception of login and logout endpoints, all API paths below are relative to http://nuscloud.jishnumohan.com/api/ for HTTP requests. Details for the Javascript SDK are given in its dedicated section.</p>

    </section>
  </article>

  <article class=''>
    <a name='/javascript' href='#/javascript'><h2>Getting Started - Javascript</h2></a>
    <section class='body'>
      <p>The Javascript SDK is the recommended way to integrate your app with NUSCloud.</p>

<h3 id="setup">Setup</h3>

<p>You can register a new app <a href="http://nuscloud.jishnumohan.com/client/registration">here</a>. Ensure that a correct domain is provided and take note of your app Id.</p>

<p>Include the following HTML code in your webpage to load the SDK.</p>

<p><code>
&lt;script src="http://nuscloud.jishnumohan.com/sdk/sdk.js"&gt;&lt;/script&gt;
&lt;script&gt;
var host = "http://nuscloud.jishnumohan.com";
var redirect_url = "some-page-on-your-site";
var app_id = "your-app-id";
var permissions = "info-read";
var nuscloud = new NUSCloud(host, redirect_url, app_id, permissions);
&lt;/script&gt;
</code></p>

<h3 id="details">Details</h3>

<p>Each element mentioned above is explained below</p>

<h4 id="host">Host</h4>

<p>The URL hosting NUSCloud</p>

<h4 id="redirect-url">Redirect URL</h4>

<p>When the user logs in, he/she is redirected momentarily (in a popup window) to a page of your website momentarily for your site to receive the relevant NUSCloud access token.</p>

<p>The point to note here is to provide a webpage of the same domain your app is running in (to receive the access token correctly) and the same domain provided to NUSCloud on registering your app (for security issues)</p>

<h4 id="app-id">App Id</h4>

<p>This is a unique identifier for your app provided on registration.</p>

<h4 id="permissions">Permissions</h4>

<p>This is a space separated string of the permissions you want to request the user for. As of now, the user can either accept or reject all permissions.</p>

<p>Permissions that can be requested are:</p>

<ul>
  <li><strong>'’info-read’‘</strong> - to read users basic information (name, username, email)</li>
  <li><strong>'’friends-read’‘</strong> - to access friends of the user using the app and allow the user to be accessed by friends using the app</li>
  <li><strong>’‘(app-namespace)-read’‘</strong> - this is if your app requires permission to read from other NUSCloud apps, where (app-namespace) refers to the namespace of the app you want to read data from (this is why NUSCloud is collaborative!)</li>
</ul>

<h3 id="requests">Requests</h3>

<p>Other than authentication, discussed separately, all requests through the sdk are made in the following formats:</p>

<p><code>nuscloud.get(path, callback)</code></p>

<p><code>nuscloud.post(path, data, callback)</code></p>

<p><code>nuscloud.delete(path, callback)</code></p>

<p>where</p>

<ul>
  <li><strong>path</strong> is a URL path String</li>
  <li><strong>data</strong> is an object</li>
  <li><strong>callback</strong> is a function that takes in one response argument</li>
</ul>

    </section>
  </article>

  <article class=''>
    <a name='/authentication' href='#/authentication'><h2>Authenticate - Javascript</h2></a>
    <section class='body'>
      <h3 id="login">Login</h3>

<p>Login through the SDK is straightforward. If initialized as earlier:</p>

<p><code>nuscloud.login(callback)</code></p>

<p>will initiliaze login. If the user is already logged in to NUSCloud and has provided all permissions to your app, there will not be any prompt. Else, he will be prompted to login via a NUSCloud popup and to provide any needed permissions.</p>

<h3 id="logout">Logout</h3>

<p>Logout is also straightforward</p>

<p><code>nuscloud.logout(callback)</code></p>

<p>will logout the user from the app by deactivating any access tokens provided.</p>

<h3 id="status">Status</h3>

<p><code>nuscloud.getLoginStatus(callback)</code></p>

<p>will provide the users status as a response to the callback. The possible results are:</p>

<ul>
  <li><strong>{status: unknown}</strong> - if the user is not logged into NUSCloud</li>
  <li><strong>{status: unauthorized}</strong> - if the user is logged in and has not authorized the app</li>
  <li><strong>{status: connected}</strong> - user is logged in and app has a valid token</li>
</ul>

    </section>
  </article>

  <article class='GET'>
    <a name='/get-user-info' href='#/get-user-info'><h2><code><b>GET</b> /:userId/userinfo</code> Get user info</h2></a>
    <section class='body'>
      <p>This method returns users basic info.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<p>If made through the SDK, this is handled in the SDK itself and can therefore be ignored.</p>

<p>A special case of this request substitutes <strong>me</strong> for <strong>:userId</strong> to get info of the logged in user</p>

<p>Requires <strong>info-read</strong> permission</p>

<h3 id="response">Response</h3>

<p>Sends back an object containing info of the user.</p>

<p><code>{
    status: 'ok',
    info: {
        userId: 'abcdefgh12',
        username: 'johndoe',
        name: 'John Doe',
        email: 'johndoe@nus.edu.sg'
    }
}</code></p>

<p>For errors responses, see the <a href="#/error-codes">status documentation</a>.</p>

    </section>
  </article>

  <article class='GET'>
    <a name='/get-app-info' href='#/get-app-info'><h2><code><b>GET</b> /:appId/userinfo</code> Get app info</h2></a>
    <section class='body'>
      <p>This method returns the basic info of the app which is logged in.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<p>If made through the SDK, this is handled in the SDK itself and can therefore be ignored.</p>

<p>A special case of this request substitutes <strong>app</strong> for <strong>:appId</strong> to get info of the logged in user</p>

<h3 id="response">Response</h3>

<p>Sends back an object containing info of the user.</p>

<p><code>{
    status: 'ok',
    info: {
        name: 'Cool App',
        namespace: 'coolapp'
    }
}</code></p>

<p>For errors responses, see the <a href="#/error-codes">status documentation</a>.</p>

    </section>
  </article>

  <article class='GET'>
    <a name='/get-friends' href='#/get-friends'><h2><code><b>GET</b> /:userId/friends</code> Get user friends</h2></a>
    <section class='body'>
      <p>This method returns users friends using the app.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<p>If made through the SDK, this is handled in the SDK itself and can therefore be ignored.</p>

<p>A special case of this request substitutes <strong>me</strong> for <strong>:userId</strong> to get info of the logged in user</p>

<p>Requires <strong>friends-read</strong> permission</p>

<h3 id="response">Response</h3>

<p>Sends back an object containing list of friends of the user.</p>

<p><code>{
    status: 'ok'
    friends: [
        { 
            name: 'Good Friend'
            userId: 'defgh1234'
        },
        {
            name: 'Tom Tomson'
            userId: 'tomtom123'
        }
    ]
}</code></p>

<p>For errors responses, see the <a href="#/error-codes">status documentation</a>.</p>

    </section>
  </article>

  <article class='GET'>
    <a name='/get-user-app-data' href='#/get-user-app-data'><h2><code><b>GET</b> /:userId/:appId/*</code> Get user data for app</h2></a>
    <section class='body'>
      <p>This method returns users data for the specified app at the specified path.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<p>If made through the SDK, this is handled in the SDK itself and can therefore be ignored.</p>

<p>Special cases of this request substitute <strong>me</strong> for <strong>:userId</strong> to get info of the logged in user and/or <strong>app</strong> for <strong>:appid</strong> to get data for current logged in app.</p>

<p>If not made by the app itself, requires <strong>(app-namespace)-read</strong> permission, where (app-namespace) is the namespace of the app whose data would be read</p>

<h3 id="response">Response</h3>

<p>Sends back an object containing info stored at the path.</p>

<p>This endpoint supports nesting. In a case where a request to <em>/me/app/example</em> returns this:</p>

<p><code>{
    status: 'ok',
    data: {
        category: 'basket',
        apples: 3,
        type: 'fresh',
    }
}</code></p>

<p>Then a request to <em>/me/app/example/apples</em> would return this:</p>

<p><code>{
    status: 'ok',
    data: 3 
}</code></p>

<p>For errors responses, see the <a href="#/error-codes">status documentation</a>.</p>

    </section>
  </article>

  <article class='POST'>
    <a name='/edit-user-app-data' href='#/edit-user-app-data'><h2><code><b>POST</b> /:userId/:appId/*</code> Edit user data for app</h2></a>
    <section class='body'>
      <p>This method edits user info for the app at the specified path.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<p>If made through the SDK, this is handled in the SDK itself and can therefore be ignored.</p>

<ul>
  <li><strong>Request body sent cannot be empty</strong> and must include a <strong>data</strong> attribute containing the data to be put at the specified path. The data attribute can be either a Javascript Object or a primitive data type (Number, Boolean, String)</li>
</ul>

<p>Special cases of this request substitute <strong>me</strong> for <strong>:userId</strong> to edit info of the logged in user and/or <strong>app</strong> for <strong>:appid</strong> to edit data for current logged in app.</p>

<p>As of now, this request can only be made by the currently logged in app.</p>

<p>This endpoint supports nesting. A request to <em>/me/app/example</em> with this data:</p>

<p><code>{
    data: {
        apples: 3
    }
}</code></p>

<p>Is equivalent to this request to <em>/me/app/example/apples</em>:</p>

<p><code>{
    data: 3 
}</code></p>

<h3 id="response">Response</h3>

<p>The response contains the status of the operation.</p>

<p><code>{
    status: 'ok' 
}</code></p>

<p>For errors responses, see the <a href="#/error-codes">status documentation</a>.</p>

    </section>
  </article>

  <article class='DELETE'>
    <a name='/delete-user-app-data' href='#/delete-user-app-data'><h2><code><b>DELETE</b> /:userId/:appId/*</code> Delete user data for app</h2></a>
    <section class='body'>
      <p>This method deletes users data for the specified app at the speicified path.</p>

<h3 id="request">Request</h3>

<ul>
  <li>The headers must include a <strong>valid authentication token</strong>.</li>
</ul>

<p>If made through the SDK, this is handled in the SDK itself and can therefore be ignored.</p>

<p>Special cases of this request substitute <strong>me</strong> for <strong>:userId</strong> to delete info of the logged in user and/or <strong>app</strong> for <strong>:appid</strong> to delete data for current logged in app.</p>

<p>As of now, this request can only be made by the currently logged in app.</p>

<h3 id="response">Response</h3>

<p>Returns the status of the delete operation.</p>

<p><code>{
    status: 'ok'
}</code></p>

<p>For errors responses, see the <a href="#/error-codes">status documentation</a>.</p>

    </section>
  </article>

  <article class=''>
    <a name='/error-codes' href='#/error-codes'><h2>Statuses</h2></a>
    <section class='body'>
      <p>Each operation returns a response with a status attribute. If the status is <strong>ok</strong>, all is good. Else possible errors are:,</p>

<ul>
  <li><strong>{status: error}</strong> - Unrecognized error</li>
  <li><strong>{status: bad token}</strong> - Invalid token</li>
  <li><strong>{status: bad endpoint}</strong> - This endpoint does not specify a resource</li>
  <li><strong>{status: unauthorized}</strong> - Absence of required permissions</li>
  <li><strong>{status: absent}</strong> - Recognizes the endpoint, but currently has no data</li>
</ul>

    </section>
  </article>

</section>

  
  <!--[if lt IE 9]><script src='http://html5shim.googlecode.com/svn/trunk/html5.js'></script><![endif]-->
  <script src='assets.js' type='text/javascript'></script>
  <script>require('boot');</script>
</body>
</html>